window.NexT||(window.NexT={}),function(){const s='next-config',e={};let t={};const o=e=>JSON.parse(e||'{}'),n=n=>{const i=document.querySelector(`.${s}[data-name="${n}"]`);if(!i)return;const a=o(i.text);n==='main'?Object.assign(e,a):t[n]=a};n('main'),window.NexT.CONFIG=new Proxy({},{get(i,s){let o;if(s in e?o=e[s]:(s in t||n(s),o=t[s]),!(s in i)&&typeof o=='object'&&(i[s]={}),s in i){const e=i[s];return typeof e=='object'&&typeof o=='object'?new Proxy({...o,...e},{set(s,t,n){return s[t]=n,e[t]=n,!0}}):e}return o}})}(),HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)},function(){const e=()=>document.dispatchEvent(new Event('page:loaded',{bubbles:!0}));document.readyState==='loading'?document.addEventListener('readystatechange',e,{once:!0}):e(),document.addEventListener('pjax:success',e)}(),NexT.utils={checkDOMExist:function(e){return document.querySelector(e)!=null},getCDNResource:function(i){let{plugins:a,router:o}=NexT.CONFIG.vendor,{name:t,version:n,file:s,alias:r}=i,c=t,e='';switch(a){case'cdnjs':let i=r||t,a=s.replace(/\.js$/,'.min.js').replace(/^(dist|lib|source\/js|)\/(browser\/|)/,'');e=`${o}/${i}/${n}/${a}`;break;default:e=`${o}/${c}@${n}/${s}`}return e},replacePostCRLink:function(){if(NexT.CONFIG.hostname.startsWith('http'))return;let e=window.location.href;e.indexOf('#')>-1&&(e=e.split('#')[0]);let t=document.getElementById('post-cr-link');if(!t)return;t.text=e,t.href=e},registerCopyCode:function(){if(!NexT.CONFIG.copybtn)return;let e=document.querySelectorAll('.highlight pre');if(e.length===0||!NexT.CONFIG.copybtn)return;e.forEach(e=>{let n=e.querySelector('code').className;if(n=='')return;e.insertAdjacentHTML('beforeend','<div class="copy-btn"><i class="fa fa-copy fa-fw"></i></div>');const t=e.querySelector('.copy-btn');t.addEventListener('click',()=>{const s=e.querySelector('.code')||e.querySelector('code'),n=s.innerText;if(navigator.clipboard)navigator.clipboard.writeText(n).then(()=>{t.querySelector('i').className='fa fa-check-circle fa-fw'},()=>{t.querySelector('i').className='fa fa-times-circle fa-fw'});else{const e=document.createElement('textarea');e.style.top=window.scrollY+'px',e.style.position='absolute',e.style.opacity='0',e.readOnly=!0,e.value=n,document.body.append(e),e.select(),e.setSelectionRange(0,n.length),e.readOnly=!1;const s=document.execCommand('copy');t.querySelector('i').className=s?'fa fa-check-circle fa-fw':'fa fa-times-circle fa-fw',e.blur(),t.blur(),document.body.removeChild(e)}}),e.addEventListener('mouseleave',()=>{setTimeout(()=>{t.querySelector('i').className='fa fa-copy fa-fw'},300)})})},wrapTableWithBox:function(){document.querySelectorAll('table').forEach(t=>{const e=document.createElement('div');e.className='table-container',t.wrap(e)})},registerVideoIframe:function(){document.querySelectorAll('iframe').forEach(e=>{const t=['www.youtube.com','player.vimeo.com','player.youku.com','player.bilibili.com','www.tudou.com'].some(t=>e.src.includes(t));if(t&&!e.parentNode.matches('.video-container')){const t=document.createElement('div');t.className='video-container',e.wrap(t);const n=Number(e.width),s=Number(e.height);n&&s&&(t.style.paddingTop=s/n*100+'%')}})},registerScrollPercent:function(){const e=document.querySelector('.back-to-top'),t=document.querySelector('.reading-progress-bar');window.addEventListener('scroll',()=>{if(e||t){const s=document.body.scrollHeight-window.innerHeight,n=s>0?Math.min(100*window.scrollY/s,100):0;e&&(e.classList.toggle('back-to-top-on',Math.round(n)>=5),e.querySelector('span').innerText=Math.round(n)+'%'),t&&t.style.setProperty('--progress',n.toFixed(2)+'%')}if(!Array.isArray(NexT.utils.sections))return;let n=NexT.utils.sections.findIndex(e=>e&&e.getBoundingClientRect().top>10);n===-1?n=NexT.utils.sections.length-1:n>0&&n--,this.activateNavByIndex(n)},{passive:!0}),e&&e.addEventListener('click',()=>{window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:0})})},registerTabsTag:function(){document.querySelectorAll('.tabs ul.nav-tabs .tab').forEach(e=>{e.addEventListener('click',s=>{if(s.preventDefault(),e.classList.contains('active'))return;const n=e.parentNode;[...n.children].forEach(t=>{t.classList.toggle('active',t===e)});const t=document.getElementById(e.querySelector('a').getAttribute('href').replace('#',''));if([...t.parentNode.children].forEach(e=>{e.classList.toggle('active',e===t)}),t.dispatchEvent(new Event('tabs:click',{bubbles:!0})),!NexT.CONFIG.stickytabs)return;const o=n.parentNode.getBoundingClientRect().top+window.scrollY+10;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:o})})}),window.dispatchEvent(new Event('tabs:register'))},registerCanIUseTag:function(){window.addEventListener('message',({data:e})=>{if(typeof e=='string'&&e.includes('ciu_embed')){const t=e.split(':')[1],n=e.split(':')[2];document.querySelector(`iframe[data-feature=${t}]`).style.height=parseInt(n,10)+5+'px'}},!1)},registerSidebarTOC:function(){this.sections=[...document.querySelectorAll('.post-toc li a.nav-link')].map(e=>{const t=document.getElementById(decodeURI(e.getAttribute('href')).replace('#',''));return e.addEventListener('click',n=>{n.preventDefault();const s=t.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:'linear',scrollTop:s,complete:()=>{history.pushState(null,document.title,e.href)}})}),t})},registerPostReward:function(){const e=document.querySelector('.reward-container button');if(!e)return;e.addEventListener('click',()=>{document.querySelector('.post-reward').classList.toggle('active')})},initCommontesDispaly:function(){const e=document.querySelectorAll('.comment-wrap > div');if(e.length<=1)return;e.forEach(function(e){var t=window.getComputedStyle(e,null).display;e.style.display=t})},registerCommonSwitch:function(){const e=document.querySelector('.comment-switch .switch-btn');if(!e)return;const t=document.querySelectorAll('.comment-wrap > div');e.addEventListener('click',()=>{e.classList.toggle('move'),t.forEach(function(e){e.style.display==='none'?e.style.cssText="display: block; animation: tabshow .8s":e.style.cssText="display: none;"})})},hideCommontes:function(){document.querySelector('.post-comments').style.display='none'},hiddeLodingCmp:function(e){const t=document.querySelector(e).previousElementSibling;t.style.display='none'},activateNavByIndex:function(s){const e=document.querySelectorAll('.post-toc li a.nav-link')[s];if(!e||e.classList.contains('active-current'))return;document.querySelectorAll('.post-toc .active').forEach(e=>{e.classList.remove('active','active-current')}),e.classList.add('active','active-current');let t=e.parentNode;for(;!t.matches('.post-toc');)t.matches('li')&&t.classList.add('active'),t=t.parentNode;const n=document.querySelector('.sidebar-panel-container');if(!n.parentNode.classList.contains('sidebar-toc-active'))return;window.anime({targets:n,duration:200,easing:'linear',scrollTop:n.scrollTop-n.offsetHeight/2+e.getBoundingClientRect().top-n.getBoundingClientRect().top})},updateSidebarPosition:function(){if(window.innerWidth<992||NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')return;const t=document.querySelector('.post-toc');let e=NexT.CONFIG.sidebar;typeof e!='boolean'&&(e=NexT.CONFIG.sidebar.display==='always'||NexT.CONFIG.sidebar.display==='post'&&t),e&&window.dispatchEvent(new Event('sidebar:show'))},activateSidebarPanel:function(e){const n=200,s=document.querySelector('.sidebar-inner'),o=document.querySelector('.sidebar-panel-container'),t=['sidebar-toc-active','sidebar-overview-active'];if(s.classList.contains(t[e]))return;window.anime({duration:n,targets:o,easing:'linear',opacity:0,translateY:[0,-20],complete:()=>{s.classList.replace(t[1-e],t[e]),window.anime({duration:n,targets:o,easing:'linear',opacity:[0,1],translateY:[-20,0]})}})},getStyle:function(t,n){const e=document.createElement('link');e.setAttribute('rel','stylesheet'),e.setAttribute('type','text/css'),e.setAttribute('href',t),(n||document.head).appendChild(e)},getScript:function(e,t={},o){if(typeof t=='function')return this.getScript(e,{condition:o}).then(t);const{condition:i=!1,attributes:{id:n='',async:a=!1,defer:r=!1,crossOrigin:s='',dataset:c={},...l}={},parentNode:d=null}=t;return new Promise((t,o)=>{if(i)t();else{const i=document.createElement('script');if(n&&(i.id=n),s&&(i.crossOrigin=s),i.async=a,i.defer=r,Object.assign(i.dataset,c),Object.entries(l).forEach(([e,t])=>{i.setAttribute(e,String(t))}),i.onload=t,i.onerror=o,typeof e=='object'){const{url:n,integrity:t}=e;i.src=n,t&&(i.integrity=t,i.crossOrigin='anonymous')}else i.src=e;(d||document.head).appendChild(i)}})},loadComments:function(e,t){return t?this.loadComments(e).then(t):new Promise(t=>{const n=document.querySelector(e);if(!n){t();return}const s=new IntersectionObserver((e,n)=>{const s=e[0];if(!s.isIntersecting)return;t(),n.disconnect()});s.observe(n)})}},NexT.boot={},NexT.boot.registerEvents=function(){document.querySelector('.site-nav-toggle .toggle').addEventListener('click',t=>{t.currentTarget.classList.toggle('toggle-close');const e=document.querySelector('.site-nav');if(!e)return;e.style.setProperty('--scroll-height',e.scrollHeight+'px'),document.body.classList.toggle('site-nav-on')}),document.querySelectorAll('.sidebar-nav li').forEach((e,t)=>{e.addEventListener('click',()=>{NexT.utils.activateSidebarPanel(t)})}),window.addEventListener('hashchange',()=>{const e=location.hash;if(e!==''&&!e.match(/%\S{2}/)){const t=document.querySelector(`.tabs ul.nav-tabs li a[href="${e}"]`);t&&t.click()}})},NexT.boot.refresh=function(){if(!NexT.CONFIG.page.isPage)return;NexT.utils.registerSidebarTOC(),NexT.utils.replacePostCRLink(),NexT.utils.registerCopyCode(),NexT.utils.registerPostReward(),NexT.CONFIG.page.comments?(NexT.utils.initCommontesDispaly(),NexT.utils.registerCommonSwitch()):NexT.utils.hideCommontes()},NexT.boot.motion=function(){NexT.CONFIG.motion.enable&&NexT.motion.integrator.add(NexT.motion.middleWares.header).add(NexT.motion.middleWares.postList).add(NexT.motion.middleWares.sidebar).add(NexT.motion.middleWares.footer).bootstrap(),NexT.utils.updateSidebarPosition()},document.addEventListener('DOMContentLoaded',()=>{NexT.boot.registerEvents(),NexT.boot.motion(),NexT.boot.refresh()}),NexT.motion={},NexT.motion.integrator={queue:[],init:function(){return this.queue=[],this},add:function(t){const e=t();return NexT.CONFIG.motion.async?this.queue.push(e):this.queue=this.queue.concat(e),this},bootstrap:function(){NexT.CONFIG.motion.async||(this.queue=[this.queue]),this.queue.forEach(t=>{const e=window.anime.timeline({duration:200,easing:'linear'});t.forEach(t=>{t.deltaT?e.add(t,t.deltaT):e.add(t)})})}},NexT.motion.middleWares={header:function(){const t=[];function n(e){t.push({targets:e,scaleX:[0,1],duration:500,deltaT:'-=200'})}function e(e,n=!1){t.push({targets:e,opacity:1,top:0,deltaT:n?'-=200':'-=0'})}return e('header.header'),NexT.CONFIG.scheme==='Mist'&&n('.logo-line'),NexT.CONFIG.scheme==='Muse'&&e('.custom-logo-image'),e('.site-title'),e('.site-brand-container .toggle',!0),e('.site-subtitle'),(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')&&e('.custom-logo-image'),document.querySelectorAll('.menu-item').forEach(e=>{t.push({targets:e,complete:()=>e.classList.add('animated','fadeInDown'),deltaT:'-=200'})}),t},subMenu:function(){const e=document.querySelectorAll('.sub-menu .menu-item');return e.length>0&&e.forEach(e=>{e.classList.add('animated')}),[]},postList:function(){const t=[],{postblock:n,postheader:s,postbody:o,collheader:i}=NexT.CONFIG.motion.transition;function e(e,n){if(!e)return;document.querySelectorAll(n).forEach(n=>{t.push({targets:n,complete:()=>n.classList.add('animated',e),deltaT:'-=100'})})}return e(n,'.post-block, .pagination, .post-comments'),e(i,'.collection-header'),e(s,'.post-header'),e(o,'.post-body'),t},sidebar:function(){const e=document.querySelector('.sidebar'),t=NexT.CONFIG.motion.transition.sidebar;return t&&(NexT.CONFIG.scheme==='Pisces'||NexT.CONFIG.scheme==='Gemini')?[{targets:e,complete:()=>e.classList.add('animated',t)}]:[]},footer:function(){return[{targets:document.querySelector('.footer'),opacity:1}]}},document.addEventListener('DOMContentLoaded',()=>{'use strict';const e=()=>{localStorage.setItem('bookmark'+location.pathname,window.scrollY)},t=()=>{let e=localStorage.getItem('bookmark'+location.pathname);e=parseInt(e,10),!isNaN(e)&&location.hash===''&&window.anime({targets:document.scrollingElement,duration:200,easing:'linear',scrollTop:e})},n=function(s){const n=document.querySelector('.book-mark-link');window.addEventListener('scroll',()=>n.classList.toggle('book-mark-link-fixed',window.scrollY===0),{passive:!0}),s==='auto'&&(window.addEventListener('beforeunload',e),document.addEventListener('pjax:send',e)),n.addEventListener('click',()=>{e(),window.anime({targets:n,duration:200,easing:'linear',top:-30,complete:()=>{setTimeout(()=>{n.style.top=''},400)}})}),t(),document.addEventListener('pjax:success',t)};n(NexT.CONFIG.bookmark.save)}),document.addEventListener('DOMContentLoaded',()=>{const e='.addthis_inline_share_toolbox';if(!NexT.CONFIG.addthis||!NexT.utils.checkDOMExist(e))return;const t=NexT.CONFIG.addthis.js+'?pubid='+NexT.CONFIG.addthis.cfg.pubid;NexT.utils.loadComments(e).then(()=>{NexT.utils.getScript(t,{attributes:{async:!0},parentNode:document.querySelector(e)})})}),document.addEventListener('DOMContentLoaded',()=>{const e='.waline-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.waline||!NexT.utils.checkDOMExist(e))return;const{emoji:t,imguploader:n,pageview:s,placeholder:o,requiredmeta:i,serverurl:a,wordlimit:r}=NexT.CONFIG.waline.cfg,c=NexT.utils.getCDNResource(NexT.CONFIG.waline.css);NexT.utils.getStyle(c,null);const l=NexT.utils.getCDNResource(NexT.CONFIG.waline.js),d={placeholder:o};NexT.utils.loadComments(e).then(()=>NexT.utils.getScript(l,{})).then(()=>{Waline.init({locale:d,el:e,pageview:s,emoji:t,imageUploader:n,wordLimit:r,requiredMeta:i,serverURL:a,lang:NexT.CONFIG.lang,dark:"auto"}),NexT.utils.hiddeLodingCmp(e)})}),document.addEventListener('DOMContentLoaded',()=>{const e='.giscus-container';if(!NexT.CONFIG.page.comments||!NexT.CONFIG.giscus||!NexT.utils.checkDOMExist(e))return;const{category:t,categoryid:n,emit:s,inputposition:o,mapping:i,reactions:a,repo:r,repoid:c,theme:l}=NexT.CONFIG.giscus.cfg;NexT.utils.loadComments(e).then(()=>NexT.utils.getScript(NexT.CONFIG.giscus.js,{attributes:{async:!0,crossorigin:'anonymous','data-repo':r,'data-repo-id':c,'data-category':t,'data-category-id':n,'data-mapping':i,'data-reactions-enabled':a?1:0,'data-emit-metadata':s?1:0,'data-input-position':o,'data-theme':l,'data-lang':NexT.CONFIG.lang,'data-loading':'lazy'},parentNode:document.querySelector(e)})),NexT.utils.hiddeLodingCmp(e)});class LocalSearch{constructor({path:e='',unescape:t=!1,top_n_per_article:n=1}){this.path=e,this.unescape=t,this.top_n_per_article=n,this.isfetched=!1,this.datas=null}getIndexByWord(o,e,n=!1){const t=[],s=new Set;return n||(e=e.toLowerCase()),o.forEach(o=>{if(this.unescape){const e=document.createElement('div');e.innerText=o,o=e.innerHTML}const a=o.length;if(a===0)return;let r=0,i=-1;for(n||(o=o.toLowerCase());(i=e.indexOf(o,r))>-1;)t.push({position:i,word:o}),s.add(o),r=i+a}),t.sort((e,t)=>e.position!==t.position?e.position-t.position:t.word.length-e.word.length),[t,s]}mergeIntoSlice(r,i,e){let s=e[0],{position:t,word:n}=s;const o=[],a=new Set;for(;t+n.length<=i&&e.length!==0;){a.add(n),o.push({position:t,length:n.length});const i=t+n.length;for(e.shift();e.length!==0;)if(s=e[0],t=s.position,n=s.word,i>t)e.shift();else break}return{hits:o,start:r,end:i,count:a.size}}highlightKeyword(t,n){let e='',s=n.start;for(const{position:o,length:i}of n.hits)e+=t.substring(s,o),s=o+i,e+=`<mark class="search-keyword">${t.substr(o,i)}</mark>`;return e+=t.substring(s,n.end),e}getResultItems(e){const t=[];return this.datas.forEach(({title:a,content:l,url:n})=>{const[r,m]=this.getIndexByWord(e,a),[i,f]=this.getIndexByWord(e,l),h=new Set([...m,...f]).size,u=r.length+i.length;if(u===0)return;const c=[];r.length!==0&&c.push(this.mergeIntoSlice(0,a.length,r));let s=[];for(;i.length!==0;){const t=i[0],{position:e}=t,n=Math.max(0,e-20),o=Math.min(l.length,e+80);s.push(this.mergeIntoSlice(n,o,i))}s.sort((e,t)=>e.count!==t.count?t.count-e.count:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start);const d=parseInt(this.top_n_per_article,10);d>=0&&(s=s.slice(0,d));let o='';n=new URL(n,location.origin),n.searchParams.append('highlight',e.join(' ')),c.length!==0?o+=`<li><a href="${n.href}" class="search-result-title">${this.highlightKeyword(a,c[0])}</a>`:o+=`<li><a href="${n.href}" class="search-result-title">${a}</a>`,s.forEach(e=>{o+=`<a href="${n.href}"><p class="search-result">${this.highlightKeyword(l,e)}...</p></a>`}),o+='</li>',t.push({item:o,id:t.length,hitCount:u,includedCount:h})}),t}fetchData(){const e=!this.path.endsWith('json');fetch(this.path).then(e=>e.text()).then(t=>{this.isfetched=!0,this.datas=e?[...(new DOMParser).parseFromString(t,'text/xml').querySelectorAll('entry')].map(e=>({title:e.querySelector('title').textContent,content:e.querySelector('content').textContent,url:e.querySelector('url').textContent})):JSON.parse(t),this.datas=this.datas.filter(e=>e.title).map(e=>(e.title=e.title.trim(),e.content=e.content?e.content.trim().replace(/<[^>]+>/g,''):'',e.url=decodeURIComponent(e.url).replace(/\/{2,}/g,'/'),e)),window.dispatchEvent(new Event('search:loaded'))})}highlightText(e,t,i){const n=e.nodeValue;let s=t.start;const o=[];for(const{position:e,length:r}of t.hits){const c=document.createTextNode(n.substring(s,e));s=e+r;const a=document.createElement('mark');a.className=i,a.appendChild(document.createTextNode(n.substr(e,r))),o.push(c,a)}e.nodeValue=n.substring(s,t.end),o.forEach(t=>{e.parentNode.insertBefore(t,e)})}highlightSearchWords(t){const n=new URL(location.href).searchParams.get('highlight'),s=n?n.split(' '):[];if(!s.length||!t)return;const e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),o=[];for(;e.nextNode();)e.currentNode.parentNode.matches('button, select, textarea')||o.push(e.currentNode);o.forEach(e=>{const[t]=this.getIndexByWord(s,e.nodeValue);if(!t.length)return;const n=this.mergeIntoSlice(0,e.nodeValue.length,t);this.highlightText(e,n,'search-keyword')})}}document.addEventListener('DOMContentLoaded',()=>{if(!NexT.CONFIG.localSearch.path){console.warn('`search indexes file` is not configurate!');return}const e=new LocalSearch({path:NexT.CONFIG.localSearch.path,top_n_per_article:NexT.CONFIG.localSearch.topnperarticle,unescape:NexT.CONFIG.localSearch.unescape}),t=document.querySelector('.search-input'),n=()=>{if(!e.isfetched)return;const i=t.value.trim().toLowerCase(),o=i.split(/[-\s]+/),n=document.querySelector('.search-result-container');let s=[];if(i.length>0&&(s=e.getResultItems(o)),o.length===1&&o[0]==='')n.classList.add('no-result'),n.innerHTML='<div class="search-result-icon"><i class="fa fa-search fa-5x"></i></div>';else if(s.length===0)n.classList.add('no-result'),n.innerHTML='<div class="search-result-icon"><i class="far fa-frown fa-5x"></i></div>';else{s.sort((e,t)=>e.includedCount!==t.includedCount?t.includedCount-e.includedCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id);const e=NexT.CONFIG.i18n.hits.replace('${hits}',s.length);n.classList.remove('no-result'),n.innerHTML=`<div class="search-stats">${e}</div>
        <hr>
        <ul class="search-result-list">${s.map(e=>e.item).join('')}</ul>`,typeof pjax=='object'&&pjax.refresh(n)}};e.highlightSearchWords(document.querySelector('.post-body')),NexT.CONFIG.localSearch.preload&&e.fetchData(),NexT.CONFIG.localSearch.trigger==='auto'?t.addEventListener('input',n):(document.querySelector('.search-icon').addEventListener('click',n),t.addEventListener('keypress',e=>{e.key==='Enter'&&n()})),window.addEventListener('search:loaded',n),document.querySelectorAll('.popup-trigger').forEach(n=>{n.addEventListener('click',()=>{document.body.classList.add('search-active'),setTimeout(()=>t.focus(),500),e.isfetched||e.fetchData()})});const s=()=>{document.body.classList.remove('search-active')};document.querySelector('.search-pop-overlay').addEventListener('click',e=>{e.target===document.querySelector('.search-pop-overlay')&&s()}),document.querySelector('.popup-btn-close').addEventListener('click',s),document.addEventListener('pjax:success',()=>{e.highlightSearchWords(document.querySelector('.post-body')),s()}),window.addEventListener('keyup',e=>{e.key==='Escape'&&s()})})